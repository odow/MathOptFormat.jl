{
    "$schema": "https://json-schema.org/schema#",
    "$id": "https://github.com/odow/MathOptFormat.jl/tree/master/src/MOF/mof.schema.json",
    "title": "The schema for MathOptFormat",
    "type": "object",
    "properties": {
        "version": {
            "const": 0
        },
        "author": {
            "description": "The author of the model for citation purposes",
            "type": "string"
        },
        "description": {
            "description": "A human-readable description of the model",
            "type": "string"
        },
        "required": ["version", "variables", "objectives", "constraints"],
        "variables": {
            "description": "An array of variables in the model. Each must have a unique name.",
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "name": {
                        "type": "string"
                    }
                },
                "required": ["name"]
            },
            "uniqueItems": true
        },
        "objectives": {
            "description": "An array of objectives in the model",
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "sense": {
                        "enum": ["min", "max"]
                    },
                    "function": {
                        "$ref": "#/definitions/scalar_functions"
                    }
                },
                "required": ["sense", "function"]
            }
        },
        "constraints": {
            "description": "An array of constraints in the model. Scalar-valued functions can only be paired with scalar-sets, and the same applies for vector-valued functions and sets.",
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "name": {
                        "type": "string"
                    }
                },
                "required": ["function", "set"],
                "oneOf": [{
                    "description": "A scalar-valued constraint",
                    "properties": {
                        "function": {
                            "$ref": "#/definitions/scalar_functions"
                        },
                        "set": {
                            "$ref": "#/definitions/scalar_sets"
                        }
                    }
                }, {
                    "description": "A vector-valued constraint",
                    "properties": {
                        "function": {
                            "$ref": "#/definitions/vector_functions"
                        },
                        "set": {
                            "$ref": "#/definitions/vector_sets"
                        }
                    }
                }]
            },
            "uniqueItems": true
        }
    },
    "definitions": {
        "ScalarAffineTerm": {
            "type": "object",
            "properties": {
                "variable": {
                    "type": "string"
                },
                "coefficient": {
                    "type": "number"
                }
            },
            "required": ["variable", "coefficient"]
        },
        "ScalarQuadraticTerm": {
            "type": "object",
            "properties": {
                "variable_1": {
                    "type": "string"
                },
                "variable_2": {
                    "type": "string"
                },
                "coefficient": {
                    "type": "number"
                }
            },
            "required": ["variable_1", "variable_2", "coefficient"]
        },
        "VectorAffineTerm": {
            "type": "object",
            "properties": {
                "output_index": {
                    "type": "integer",
                    "minimum": 1
                },
                "scalar_term": {
                    "$ref": "#/definitions/ScalarAffineTerm"
                }
            },
            "required": ["output_index", "scalar_term"]
        },
        "VectorQuadraticTerm": {
            "type": "object",
            "properties": {
                "output_index": {
                    "type": "integer",
                    "minimum": 1
                },
                "scalar_term": {
                    "$ref": "#/definitions/ScalarQuadraticTerm"
                }
            },
            "required": ["output_index", "scalar_term"]
        },
        "NonlinearTerm": {
            "description": "A node in an expresion graph representing a nonlinear function.",
            "oneOf": [{
                "description": "Unary operators",
                "type": "object",
                "properties": {
                    "head": {
                        "enum": [
                            "log", "log10", "exp", "sqrt", "floor", "ceil", "abs",
                            "cos", "sin", "tan", "acos", "asin", "atan",
                            "cosh", "sinh", "tanh", "acosh", "asinh", "atanh"
                        ]
                    },
                    "args": {
                        "type": "array",
                        "items": {
                            "$ref": "#/definitions/NonlinearTerm"
                        },
                        "minItems": 1,
                        "maxItems": 1
                    }
                },
                "required": ["head", "args"]
            }, {
                "description": "Binary operators",
                "type": "object",
                "properties": {
                    "head": {
                        "enum": ["/", "^"]
                    },
                    "args": {
                        "type": "array",
                        "items": {
                            "$ref": "#/definitions/NonlinearTerm"
                        },
                        "minItems": 2,
                        "maxItems": 2
                    }
                },
                "required": ["head", "args"]
            }, {
                "description": "Nnary operators",
                "type": "object",
                "properties": {
                    "head": {
                        "enum": ["+", "-", "*", "min", "max"]
                    },
                    "args": {
                        "type": "array",
                        "items": {
                            "$ref": "#/definitions/NonlinearTerm"
                        },
                        "minItems": 1
                    }
                },
                "required": ["head", "args"]
            }, {
                "description": "A real-valued numeric constant",
                "type": "object",
                "properties": {
                    "head": {
                        "const": "real"
                    },
                    "value": {
                        "type": "number"
                    }
                },
                "required": ["head", "value"]
            }, {
                "description": "A complex-valued numeric constant",
                "type": "object",
                "properties": {
                    "head": {
                        "const": "complex"
                    },
                    "real": {
                        "type": "number"
                    },
                    "imag": {
                        "type": "number"
                    }
                },
                "required": ["head", "real", "imag"]
            }, {
                "description": "A reference to an optimization variable",
                "type": "object",
                "properties": {
                    "head": {
                        "const": "variable"
                    },
                    "name": {
                        "type": "string"
                    }
                },
                "required": ["head", "name"]
            }, {
                "description": "A pointer to a (1-indexed) element in the `node_list` field in a nonlinear function",
                "type": "object",
                "properties": {
                    "head": {
                        "const": "node"
                    },
                    "index": {
                        "type": "integer",
                        "minimum": 1
                    }
                },
                "required": ["head", "index"]
            }]
        },
        "scalar_functions": {
            "description": "A schema for the scalar-valued functions defined by MathOptFormat.See http://www.juliaopt.org/MathOptInterface.jl/v0.8/apireference/#Functions-and-function-modifications-1 for a list of the functions and their meanings.",
            "oneOf": [{
                "type": "object",
                "properties": {
                    "head": {
                        "const": "SingleVariable"
                    },
                    "variable": {
                        "type": "string"
                    }
                },
                "required": ["head", "variable"]
            }, {
                "type": "object",
                "properties": {
                    "head": {
                        "const": "ScalarAffineFunction"
                    },
                    "constant": {
                        "type": "number"
                    },
                    "terms": {
                        "type": "array",
                        "items": {
                            "$ref": "#/definitions/ScalarAffineTerm"
                        }
                    }
                },
                "required": ["head", "constant", "terms"]
            }, {
                "type": "object",
                "properties": {
                    "head": {
                        "const": "ScalarQuadraticFunction"
                    },
                    "constant": {
                        "type": "number"
                    },
                    "affine_terms": {
                        "type": "array",
                        "items": {
                            "$ref": "#/definitions/ScalarAffineTerm"
                        }
                    },
                    "quadratic_terms": {
                        "type": "array",
                        "items": {
                            "$ref": "#/definitions/ScalarQuadraticTerm"
                        }
                    }
                },
                "required": ["head", "constant", "affine_terms", "quadratic_terms"]
            }, {
                "type": "object",
                "properties": {
                    "head": {
                        "const": "Nonlinear"
                    },
                    "root": {
                        "$ref": "#/definitions/NonlinearTerm"
                    },
                    "node_list": {
                        "type": "array",
                        "items": {
                            "$ref": "#/definitions/NonlinearTerm"
                        }
                    }
                },
                "required": ["head", "root", "node_list"]
            }]
        },
        "vector_functions": {
            "description": "A schema for the vector-valued functions defined by MathOptFormat.See http://www.juliaopt.org/MathOptInterface.jl/v0.8/apireference/#Functions-and-function-modifications-1 for a list of the functions and their meanings.",
            "oneOf": [{
                "type": "object",
                "properties": {
                    "head": {
                        "const": "VectorOfVariables"
                    },
                    "variables": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    }
                },
                "required": ["head", "variables"]
            }, {
                "type": "object",
                "properties": {
                    "head": {
                        "const": "VectorAffineFunction"
                    },
                    "constants": {
                        "type": "array",
                        "items": {
                            "type": "number"
                        }
                    },
                    "terms": {
                        "type": "array",
                        "items": {
                            "$ref": "#/definitions/VectorAffineTerm"
                        }
                    }
                },
                "required": ["head", "constants", "terms"]
            }, {
                "type": "object",
                "properties": {
                    "head": {
                        "const": "VectorQuadraticFunction"
                    },
                    "constants": {
                        "type": "array",
                        "items": {
                            "type": "number"
                        }
                    },
                    "affine_terms": {
                        "type": "array",
                        "items": {
                            "$ref": "#/definitions/VectorAffineTerm"
                        }
                    },
                    "quadratc_terms": {
                        "type": "array",
                        "items": {
                            "$ref": "#/definitions/VectorQuadraticTerm"
                        }
                    }
                },
                "required": ["head", "constants", "affine_terms", "quadratic_terms"]
            }]
        },
        "scalar_sets": {
            "description": "A schema for the scalar-valued sets defined by MathOptFormat. See http: //www.juliaopt.org/MathOptInterface.jl/v0.8/apireference/#Sets-1 for a list of the sets and their meanings.",
            "oneOf": [{
                "type": "object",
                "properties": {
                    "head": {
                        "const": "LessThan"
                    },
                    "upper": {
                        "type": "number"
                    }
                },
                "required": ["head", "upper"]
            }, {
                "type": "object",
                "properties": {
                    "head": {
                        "const": "GreaterThan"
                    },
                    "lower": {
                        "type": "number"
                    }
                },
                "required": ["head", "lower"]
            }, {
                "type": "object",
                "properties": {
                    "head": {
                        "const": "EqualTo"
                    },
                    "value": {
                        "type": "number"
                    }
                },
                "required": ["head", "value"]
            }, {
                "type": "object",
                "properties": {
                    "head": {
                        "enum": ["Interval", "Semiinteger", "Semicontinuous"]
                    },
                    "lower": {
                        "type": "number"
                    },
                    "upper": {
                        "type": "number"
                    }
                },
                "required": ["head", "lower", "upper"]
            }, {
                "type": "object",
                "properties": {
                    "head": {
                        "enum": ["ZeroOne", "Integer"]
                    }
                },
                "required": ["head"]
            }]
        },
        "vector_sets": {
            "description": "A schema for the vector-valued sets defined by MathOptFormat. See http: //www.juliaopt.org/MathOptInterface.jl/v0.8/apireference/#Sets-1 for a list of the sets and their meanings.",
            "oneOf": [{
                "type": "object",
                "properties": {
                    "head": {
                        "enum": ["ExponentialCone", "DualExponentialCone"]
                    }
                },
                "required": ["head"]
            }, {
                "type": "object",
                "properties": {
                    "head": {
                        "enum": ["SOS1", "SOS2"]
                    },
                    "weights": {
                        "type": "array",
                        "items": {
                            "type": "number"
                        }
                    }
                },
                "required": ["head", "weights"]
            }, {
                "type": "object",
                "properties": {
                    "head": {
                        "enum": ["Zeros", "Reals", "Nonpositives", "Nonnegatives", "SecondOrderCone", "RotatedSecondOrderCone", "GeometricMeanCone"]
                    },
                    "dimension": {
                        "type": "integer",
                        "minimum": 1
                    }
                },
                "required": ["head", "dimension"]
            }, {
                "type": "object",
                "properties": {
                    "head": {
                        "enum": ["RootDetConeTriangle", "RootDetConeSquare", "LogDetConeTriangle", "LogDetConeSquare", "PositiveSemidefiniteConeTriangle", "PositiveSemidefiniteConeSquare"]
                    },
                    "side_dimension": {
                        "type": "integer",
                        "minimum": 1
                    }
                },
                "required": ["head", "side_dimension"]
            }, {
                "type": "object",
                "properties": {
                    "head": {
                        "enum": ["PowerCone", "DualPowerCone"]
                    },
                    "exponent": {
                        "type": "number"
                    }
                },
                "required": ["head", "exponent"]
            }]
        }
    }
}